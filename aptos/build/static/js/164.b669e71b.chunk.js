"use strict";(self.webpackChunk_petra_extension=self.webpackChunk_petra_extension||[]).push([[164],{12164:(e,o,t)=>{t.r(o),t.d(o,{boxShadow:()=>l,default:()=>x});var n=t(5057),s=t(6636),i=t(52765),r=t(20282),a=t(76035),c=t(76587),d=t(27505),u=t(96266);const l="rgba(149, 157, 165, 0.2) 0px 0px 8px 4px",w=["375px","600px"],p=["100vw","calc(100vh - 72px)"],m={dark:"gray.800",light:"gray.100"},h={dark:"gray.700",light:"white"},v=window&&window.location.origin,g={domain:v,imageURI:window&&"".concat(v,"/icon128.png"),name:"Petra Dev"};function x(e){let{children:o}=e;const{colorMode:t,setColorMode:v}=(0,s.If)(),[x,f]=(0,n.useState)(w),y="100vw"===x[0],{activeAccountAddress:b}=(0,c.m)(),j={arguments:[b,717],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0x1::aptos_coin::AptosCoin"]};return(0,u.jsxs)(i.gC,{w:"100vw",h:"100vh",spacing:0,children:[(0,u.jsx)(i.kC,{flexDirection:"row-reverse",w:"100%",py:4,bgColor:h[t],children:(0,u.jsxs)(i.Ug,{spacing:4,pr:4,children:[(0,u.jsx)(r.zx,{onClick:async()=>{const e=await d.wc.requestPermission(g,{type:"connect"});console.log("Result",e)},children:"Connect"}),(0,u.jsx)(r.zx,{onClick:async()=>{const e=await d.wc.requestPermission(g,{payload:j,type:"signAndSubmitTransaction"});console.log("Result",e)},children:"Sign transaction"}),(0,u.jsx)(r.zx,{onClick:async()=>{const e=await d.wc.requestPermission(g,{message:"Si sta come d'autunno, sugli alberi, le foglie",type:"signMessage"});console.log("Result",e)},children:"Sign message"}),(0,u.jsx)(r.zx,{onClick:()=>f(w),children:"Extension"}),(0,u.jsx)(r.zx,{onClick:()=>f(p),children:"Full screen"}),(0,u.jsx)(r.hU,{"aria-label":"dark mode",icon:"dark"===t?(0,u.jsx)(a.NW,{}):(0,u.jsx)(a.kL,{}),onClick:()=>v("dark"===t?"light":"dark")})]})}),(0,u.jsx)(i.M5,{w:"100%",h:"100%",bgColor:m[t],children:(0,u.jsx)(i.M5,{maxW:x[0],maxH:x[1],w:x[0],h:x[1],borderRadius:".5rem",boxShadow:y?void 0:l,children:o})})]})}},91893:(e,o,t)=>{t.r(o),t.d(o,{requestPermission:()=>r,sendPermissionResponse:()=>a});var n=t(56909),s=t(3224),i=t(45875);async function r(e,o){var t;const r={dappInfo:e,id:Date.now(),permission:o};await n.a.set({permissionRequest:r});const a=null!==(t=await async function(){const{id:e}=chrome.runtime;return(await chrome.tabs.query({})).find((o=>{const t=o.url?new URL(o.url):void 0;return(null===t||void 0===t?void 0:t.hostname)===e&&(null===t||void 0===t?void 0:t.pathname)==="/".concat(i.px)}))}())&&void 0!==t?t:await async function(){var e,o;const{height:t,width:n}=i.Im,s=await chrome.windows.getCurrent(),r=(null!==(e=s.left)&&void 0!==e?e:0)+(null!==(o=s.width)&&void 0!==o?o:0)-n,{top:a}=s,c=await chrome.windows.create({height:t,left:r,top:a,type:"popup",width:n});if(void 0===c.id)throw new Error("Prompt window was created without an id");const d=await chrome.tabs.create({active:!0,url:i.px,windowId:c.id});if(void 0===d.id)throw new Error("Prompt tab was created without an id");return d}();if(void 0===a.id||a.id===chrome.tabs.TAB_ID_NONE)throw new Error("Invalid prompt tab id");await chrome.windows.update(a.windowId,{focused:!0});const c=await async function(e,o){return new Promise((t=>{const n={onMessage:(i,r)=>{var a;(null===(a=r.tab)||void 0===a?void 0:a.id)===e&&(0,s.tt)(i)&&i.id===o&&(chrome.runtime.onMessage.removeListener(n.onMessage),chrome.tabs.onRemoved.removeListener(n.onTabRemoved),t(i))},onTabRemoved:i=>{i===e&&(chrome.runtime.onMessage.removeListener(n.onMessage),chrome.tabs.onRemoved.removeListener(n.onTabRemoved),t({id:o,status:s.N_.Rejected}))}};chrome.runtime.onMessage.addListener(n.onMessage),chrome.tabs.onRemoved.addListener(n.onTabRemoved)}))}(a.id,r.id);return(0,i.AP)(c)}async function a(e){await chrome.runtime.sendMessage(e)}},6778:(e,o,t)=>{t.d(o,{w:()=>i});var n=t(91893),s=t(3202);t(45875);const i=void 0===chrome.runtime?s:n},45875:(e,o,t)=>{t.d(o,{AP:()=>a,Im:()=>s,px:()=>i});var n=t(3224);const s={height:520,width:375},i="prompt.html";class r extends Error{constructor(e){const o=Object.values(n.N_).indexOf(e);super(Object.keys(n.N_).at(o)),this.status=e,this.name="PermissionResponseError",Object.setPrototypeOf(this,r.prototype)}}function a(e){if(e.status===n.N_.Approved)return e.approval;throw new r(e.status)}},3202:(e,o,t)=>{t.r(o),t.d(o,{requestPermission:()=>a,sendPermissionResponse:()=>c});var n=t(56909),s=t(3224),i=t(45875);let r;async function a(e,o){var t;const a={dappInfo:e,id:Date.now(),permission:o};await n.a.set({permissionRequest:a});const c=null!==(t=void 0===r||r.closed?void 0:r)&&void 0!==t?t:await async function(){const{height:e,width:o}=i.Im,t={height:e,left:window.screenLeft+window.outerWidth-o,popup:!0,top:window.screenTop,width:o},n=Object.entries(t).map((e=>{let[o,t]=e;return"".concat(o,"=").concat(JSON.stringify(t))})).reduce(((e,o)=>"".concat(e,", ").concat(o))),s=window.open(i.px,"prompt",n);if(null===s)throw new Error("Couldn't open permission request popup");return r=s,s}();c.focus();const d=await async function(e,o){return new Promise((t=>{const n={onMessage:i=>{i.source===e&&(0,s.tt)(i.data)&&i.data.id===o&&(window.removeEventListener("message",n.onMessage),clearTimeout(n.promptPollerId),t(i.data))},promptPollerId:setInterval((()=>{var e;!1!==(null===(e=r)||void 0===e?void 0:e.closed)&&(window.removeEventListener("message",n.onMessage),clearTimeout(n.promptPollerId),t({id:o,status:s.N_.Rejected}))}),500)};window.addEventListener("message",n.onMessage)}))}(c,a.id);return(0,i.AP)(d)}async function c(e){window.opener.postMessage(e)}},27505:(e,o,t)=>{t.d(o,{N_:()=>s.N_,wc:()=>n.w});var n=t(6778),s=t(3224)},3224:(e,o,t)=>{t.d(o,{N_:()=>n.N,tt:()=>n.t});var n=t(5085)},5085:(e,o,t)=>{let n;function s(e){return void 0!==e.id&&Object.values(n).includes(e.status)}t.d(o,{N:()=>n,t:()=>s}),function(e){e.Approved="approved",e.Rejected="rejected",e.Timeout="timeout"}(n||(n={}))}}]);